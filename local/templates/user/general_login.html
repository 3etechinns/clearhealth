<fieldset class="radio">
	<legend>{l}Login Information{/l}</legend>
	<input type="hidden" name="user[user_id]" value="{$user->get('id')}">
<table><tr><td>
	<table>
		<tr>
			<td><label>{l}Username{/l}: </label></td>
			<td><input id="toad" type="text" name="user[username]" value="{$user->get('username')}"></td>
		</tr>
		<tr>
			<td><label>{l}Password{/l}: </label></td>
			<td><input id="password" type="password" name="user[password]" {if $user->get('id') > 0}disabled="true"{/if}>{if $user->get('id') > 0}<input type="submit" value="Change Password" onclick="return togglePassword(this);">{/if}</td>
		</tr>
		<tr>
			<td><label>{l}Repeat Password{/l}: </label></td>
			<td><input id="password_match" type="password" name="user[password_match]" {if $user->get('id') > 0}disabled="true"{/if}></td>
		</tr>
	</table>
</td><td>
	<table>
		<tr>
			<td style="text-align:center"><label class="inline">{l}Security Roles{/l}</label></td>
		</tr>
		<tr>
			<td>
				<select size="5" multiple=true name="user[groups][]">
					{html_options options=$user->getDisplayGroups('roles') selected=$user->get('selected_group_ids')}
				</select>
			</td>
		</tr>
	</table>

</td></tr></table>
</fieldset>
{clni_register_validation_rule id="toad"}
{clni_register_validation_rule id="password" rule="match"}

{literal}
<script type="text/javascript">
	function togglePassword(el) {
		if (document.getElementById('password').disabled) {
			document.getElementById('password').disabled = false;
			document.getElementById('password_match').disabled = false; 
			el.value = "Don't Change Password";
		}
		else {
			document.getElementById('password').disabled = true;
			document.getElementById('password_match').disabled = true; 
			el.value = "Change Password";
		}
		return false;
	}
</script>
{/literal}
