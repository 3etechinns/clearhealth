<script type='text/javascript' src='{$base_dir}jpspan_server.php?client'></script>
<SCRIPT type='text/javascript' src="{$base_dir}js/autocomplete2.js"></script>
{literal}
<script language="javascript">
function captureEnter (field, event) {
		var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
		if (keyCode == 13) {
			var i;
			for (i = 0; i < field.form.elements.length; i++)
				if (field == field.form.elements[i])
					break;
			i = (i + 1) % field.form.elements.length;
			field.form.elements[i].focus();
			return false;
		} 
		else
		return true;
}      

</script>
{/literal}
{assign var='codingsubmit' value=true}
{clni_form name="coding_form" action=$FORM_ACTION autocomplete="off" process=$PROCESS}
{include file='coding/general_update.html'}

{literal}
<script language="javascript">
function clni_rule_hasicd(element) {
	var childDiv = document.getElementById('child_codes');
	var cptDiv = document.getElementById('cptlist');
	if (document.getElementById('parent_id').value == '' && cptDiv.childNodes.length == 1 &&
			childDiv.childNodes.length == 1 && document.getElementById('child_code').value == '') {
		return true;
	}
	if (childDiv.childNodes.length == 1) {
		return false;
	}
	return true;
}
function clni_rule_hascpt(element) {
	// if the cpt is empty and icd list is empty then were valid
	var childDiv = document.getElementById('child_codes');
	var cptDiv = document.getElementById('cptlist');
	if (document.getElementById('parent_id').value == '' && cptDiv.childNodes.length == 1 &&
			childDiv.childNodes.length == 1 && document.getElementById('child_code').value == '') {
		return true;
	}
	if (document.getElementById('parent_id').value > 0) {
		return true;
	}
	if (cptDiv.childNodes.length == 1) {
		return false;
	}
	return true;

}


</script>
{/literal}

</form>